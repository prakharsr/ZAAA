<mat-toolbar>  
  <mat-toolbar-row>
    <div class="container">Manage Categories</div>
  </mat-toolbar-row>
</mat-toolbar>

<br>

<div class="container">
  <div class="row">
    <div class="col-md">
      <form class="form-row" (ngSubmit)="addCategory(0)" #category1Form="ngForm">
        <div class="col">
          <input [(ngModel)]="inputText[0]" class="form-control" name="category1" required>
        </div>
        <div class="col-auto">
          <button type="submit" class="btn btn-outline-info" [disabled]="!category1Form.form.valid">
            <mat-icon>add</mat-icon>
          </button>
        </div>
      </form>
      <br>
      <div class="list-group">
        <button *ngFor="let category of categories" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" [class.active]="selectedCategories[0] == category" (click)="setCategory(0, category)">
          {{category.name}}

          <button mat-icon-button color="warn" (click)="deleteCategory(0, category)">
            <mat-icon>delete</mat-icon>
          </button>
        </button>
      </div>
    </div>

    <ng-container *ngFor="let selectedCategory of selectedCategories; index as i">
      <div class="col-md" *ngIf="i != 0 && selectedCategories[i - 1] != null ">
        <form class="form-row" (ngSubmit)="addCategory(i)" #categoryForm="ngForm">
          <div class="col">
            <input [(ngModel)]="inputText[i]" class="form-control" name="category-{{i}}" required>
          </div>
          <div class="col-auto">
            <button type="submit" class="btn btn-outline-info" [disabled]="!categoryForm.form.valid">
              <mat-icon>add</mat-icon>
            </button>
          </div>
        </form>
        <br>
        <div class="list-group">
          <button *ngFor="let category of selectedCategories[i - 1].subcategories" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center" [class.active]="selectedCategory == category" (click)="setCategory(i, category)">
            {{category.name}}

            <button mat-icon-button color="warn" (click)="deleteCategory(i, category)">
              <mat-icon>delete</mat-icon>
            </button>
          </button>
        </div>
      </div>
    </ng-container>
  </div>
</div>