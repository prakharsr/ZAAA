<mat-toolbar>  
  <mat-toolbar-row>
    <div class="container">Create Invoice</div>
  </mat-toolbar-row>
</mat-toolbar>

<br>

<div class="container">
  <div class="row">
    <div class="col-md">
      <h5>Select Insertions</h5>

      <br>

      <div *ngFor="let item of availableInsertions">
        <mat-checkbox [(ngModel)]="item.checked">
          {{toDate(item.insertion.date) | date}}
        </mat-checkbox>
      </div>

      <br><br>
    </div>
    <div class="col-md-auto">
      <p>
        <strong>Media House:</strong> {{mediaHouse.pubName}} - {{mediaHouse.address.edition}}<br>
        <strong>Client:</strong> {{client.orgName}}<br>
        <strong>Executive:</strong> {{executive.executiveName}} - {{executive.orgName}}
      </p>
    
      <br><br>
    </div>
  </div>

  <form (ngSubmit)="submit()" #invoiceForm="ngForm">
    <mat-accordion>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Other Charges</mat-panel-title>
          <mat-panel-description>Enter Other Charges</mat-panel-description>
        </mat-expansion-panel-header>

        <div class="text-muted" *ngIf="invoice.otherCharges.length == 0">
          No Other Charges
        </div>

        <div *ngFor="let item of invoice.otherCharges; index as i" class="mb-1">
          <div class="form-row">
            <div class="col">
              <mat-form-field>
                <input matInput placeholder="Type" name="otherChargesType-{{i}}" [(ngModel)]="item.chargeType" required #otherChargesTypeField="ngModel">
                <mat-error *ngIf="otherChargesTypeField.errors && otherChargesTypeField.errors.required">
                  Type is required.
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col">
              <mat-form-field>
                <input type="number" matInput placeholder="Amount" name="otherCharges-{{i}}" [(ngModel)]="item.amount" required #otherChargesField="ngModel">
                <mat-error *ngIf="otherChargesField.errors && otherChargesField.errors.required">
                  Amount is required.
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-auto col-form-label">
              <button mat-icon-button color="warn" type="button" (click)="removeOtherCharge(i)">
                <mat-icon>delete</mat-icon>
              </button>
            </div>
          </div>
        </div>
        
        <br>

        <mat-action-row>
          <button mat-button type="button" color="primary" (click)="addCharges()">Add More</button>
        </mat-action-row>
      </mat-expansion-panel>
    </mat-accordion>

    <br><br>

    <button class="btn btn-success" type="submit" [disabled]="!invoiceForm.form.valid">Submit</button>
    <button class="btn btn-danger" type="button" (click)="cancel()">Cancel</button>
  </form>
</div>