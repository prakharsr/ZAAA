<mat-toolbar>  
  <mat-toolbar-row>
    <div class="container">Release Orders</div>
  </mat-toolbar-row>
</mat-toolbar>

<br>

<ng-template #rtPubname let-r="result">
  {{r.pubName}}
</ng-template>

<ng-template #rtPubedition let-r="result">
  {{r.address.edition}}
</ng-template>

<ng-template #rtClientname let-r="result">
  {{r.orgName}}
</ng-template>

<ng-template #rtExecutivename let-r="result">
  {{r.executiveName}}
</ng-template>

<ng-template #rtExecutiveorganisation let-r="result">
  {{r.orgName}}
</ng-template>

<div class="container">
  <div class="form-group">
    <input type="text" class="form-control" [(ngModel)]="queryPubname" [ngbTypeahead]="searchMediaHouse" placeholder="Search" [resultTemplate]="rtPubname" [inputFormatter]="mediaHouseNameFormatter"/>
  </div>

  <div class="form-group">
    <input type="text" class="form-control" [(ngModel)]="queryPubedition" [ngbTypeahead]="searchMediaHouse" placeholder="Search" [resultTemplate]="rtPubedition"/>
  </div>

  <div class="form-group">
    <input type="text" class="form-control" [(ngModel)]="queryClientname" [ngbTypeahead]="searchClient" placeholder="Search" [resultTemplate]="rtClientname" [inputFormatter]="clientNameFormatter" />
  </div>

  <div class="form-group">
    <input type="text" class="form-control" [(ngModel)]="queryExecutivename" [ngbTypeahead]="searchExecutive" placeholder="Search" [resultTemplate]="rtExecutivename" [inputFormatter]="executiveNameFormatter" />
  </div>

  <div class="form-group">
    <input type="text" class="form-control" [(ngModel)]="queryExecutiveorganisation" [ngbTypeahead]="searchExecutive" placeholder="Search" [resultTemplate]="rtExecutiveorganisation" [inputFormatter]="executiveOrgFormatter" />
  </div>

  <button class="fab" routerLink="/releaseorders/new">
    <mat-icon>add</mat-icon>
  </button>

  <br>
  <p *ngIf="releaseOrders.length == 0" class="text-muted">
    No Release Orders
  </p>

  <div class="mat-elevation-z3">
    <mat-table #table [dataSource]="dataSource">
      <ng-container matColumnDef="data">
        <mat-header-cell *matHeaderCellDef>#</mat-header-cell>
        <mat-cell *matCellDef="let element">
          <br>
          <a [routerLink]="['/releaseorders', element.id]">{{element.releaseOrderNO}}Dummy</a>
          <br><br>
          <span class="text-muted">Publication:</span> {{element.publicationName}}<br>
          <span class="text-muted">Client:</span> {{element.clientName}}
          <br><br>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="action">
        <mat-header-cell *matHeaderCellDef></mat-header-cell>
        <mat-cell *matCellDef="let element">
          <mat-menu #releaseOrderMenu="matMenu">
            <button mat-menu-item (click)="gen(element)">
              Generate
            </button>
            <button mat-menu-item (click)="sendMsg(element)">
              <mat-icon>mail</mat-icon> Generate and Send
            </button>
            <button mat-menu-item [routerLink]="['/releaseorders/new', element.id]">
              <mat-icon>add</mat-icon> Copy into New
            </button>
            <button mat-menu-item [routerLink]="['/invoices/new', element.id]">
              <mat-icon>add</mat-icon> Create Invoice
            </button>
            <button mat-menu-item [routerLink]="['/releaseorders/edit', element.id]">
              <mat-icon>edit</mat-icon> Edit
            </button>
            <button mat-menu-item class="text-danger" (click)="deleteReleaseOrder(element)">
              <mat-icon>delete</mat-icon> Delete
            </button>
          </mat-menu>
          
          <button mat-icon-button [matMenuTriggerFor]="releaseOrderMenu">
            <mat-icon>more_vert</mat-icon>
          </button>
        </mat-cell>
      </ng-container>

      <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
    </mat-table>
  </div>

  <br>

  <nav *ngIf="pageCount != 0">
    <ul class="pagination">
      <li class="page-item" [class.disabled]="page == 1">
        <a class="page-link" [routerLink]="['/releaseorders/list', +page - 1]" aria-label="Previous">
          <span aria-hidden="true">&laquo;</span>
          <span class="sr-only">Previous</span>
        </a>
      </li>
      <li class="page-item" *ngFor="let x of dummyArray; index as i" [class.active]="i == page">
        <a class="page-link" [routerLink]="['/releaseorders/list', i + 1]">{{i + 1}}</a>
      </li>
      <li class="page-item" [class.disabled]="page == pageCount">
        <a class="page-link" [routerLink]="['/releaseorders/list', +page + 1]" aria-label="Next">
          <span aria-hidden="true">&raquo;</span>
          <span class="sr-only">Next</span>
        </a>
      </li>
    </ul>
  </nav>
</div>